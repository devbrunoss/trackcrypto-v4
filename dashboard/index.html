<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark" data-mode="advanced">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrackCrypto Dashboard – Acompanhe o Mercado Cripto em Tempo Real</title>
  <meta name="description"
    content="Dashboard de criptomoedas com preços em tempo real, gráficos, indicadores e ferramentas de risco para iniciantes e avançados.">
  <link rel="canonical" href="https://trackcrypts.netlify.app/">

  <!-- Open Graph -->
  <meta property="og:title" content="TrackCrypto – Acompanhe o Mercado Cripto em Tempo Real">
  <meta property="og:description"
    content="Dashboard premium para acompanhar preços, volume e métricas do mercado de criptomoedas.">
  <meta property="og:image" content="https://trackcrypts.netlify.app/img/logo.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://trackcrypts.netlify.app">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TrackCrypto – Acompanhe o Mercado Cripto em Tempo Real">
  <meta name="twitter:description"
    content="Dashboard premium para acompanhar preços, volume e métricas do mercado de criptomoedas.">
  <meta name="twitter:image" content="https://trackcrypts.netlify.app/img/logo.png">

  <!-- Adicione isso no <head> do seu HTML -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://api.coingecko.com">


  <!-- Schema.org markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "TrackCrypto",
    "description": "Ferramentas gratuitas para análise de criptomoedas",
    "url": "https://trackcripto.netlify.app",
    "applicationCategory": "FinanceApplication"
  }
  </script>

  <!-- Bibliotecas externas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

  <!-- Arquivos locais -->
  <link rel="stylesheet" href="dashboard.css">


  <!-- Favicon -->
  <link rel="icon" href="public/img/favicon.ico">
</head>

<body>
  <button id="backToTop" class="back-to-top" aria-label="Voltar ao topo">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Header Completo Desktop + Mobile -->
  <header id="pageHeader">
    <div class="logo">
      <span class="logo-track">Track</span><span class="logo-crypto">Crypto</span>
    </div>


    <!-- Menu Mobile -->
    <div class="nav-overlay" id="navOverlay"></div>
    <nav class="mobile-nav" id="mobileNav">
      <div class="nav-header">
        <h3>Menu</h3>
        <button class="close-menu" id="closeMenu">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="nav-controls">
        <div class="nav-control-item">
          <i class="fas fa-palette"></i>
          <span>Tema Escuro/Claro</span>
          <label class="switch">
            <input type="checkbox" id="themeToggle">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="nav-divider"></div>

      <ul class="nav-links">
        <li><a href="#market-overview" class="nav-link" data-section="market-overview"><i class="fas fa-chart-line"></i>
            Visão do Mercado</a></li>
        <li><a href="#market-indices" class="nav-link" data-section="market-indices"><i class="fas fa-globe"></i>
            Índices</a></li>
        <li><a href="#tools-section" class="nav-link" data-section="tools-section"><i class="fas fa-tools"></i>
            Ferramentas</a></li>
        <li><a href="#education-news" class="nav-link" data-section="education-news"><i
              class="fas fa-graduation-cap"></i> Educação & Notícias</a></li>
        <li><a href="#partners" class="nav-link" data-section="partners"><i class="fas fa-star"></i> Plataformas
            Parceiras</a></li>
        <li><a href="#" class="nav-link" id="mobileChatBtn"><i class="fas fa-robot"></i> Chat IA</a></li>
      </ul>

      <div class="nav-footer">
        <span class="logo-track">Track</span><span class="logo-crypto">Crypto</span>
      </div>
    </nav>

    <!-- Botão Menu Mobile -->
    <button class="menu-toggle" id="menuToggle">
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
    </button>
  </header>

  <main class="dashboard-container">
    <!-- SEÇÃO 1: VISÃO GERAL DO MERCADO -->
    <section id="market-overview">

      <div class="cards-grid">
        <!-- Crypto Price Card -->
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 id="cryptoName">Bitcoin (BTC)</h2>
            <div style="position:relative;">
              <select id="moedaSelect" class="form-input">
                <option value="bitcoin">BTC</option>
                <option value="ethereum">ETH</option>
                <option value="tether">USDT</option>
                <option value="bnb">BNB</option>
                <option value="solana">SOL</option>
                <option value="cardano">ADA</option>
                <option value="ripple">XRP</option>
                <option value="dogecoin">DOGE</option>
              </select>
            </div>
          </div>
          <div class="price" id="price">R$ --</div>
          <div id="variation">Variação 24h: --</div>
          <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted);">
            Negocie com taxa 0.1% na <a href="https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0062C7L8QA"
              target="_blank" style="color: var(--primary); text-decoration: underline;">Binance</a>
          </p>
        </div>

        <!-- Advanced Metrics -->
        <div class="card">
          <h2><i class="fas fa-chart-bar"></i> Métricas Avançadas</h2>
          <div class="metrics-grid">
            <div class="metric-card">
              <p><i class="fas fa-trophy"></i> Ranking</p>
              <h3 id="rank">--</h3>
            </div>
            <div class="metric-card">
              <p><i class="fas fa-coins"></i> Capitalização</p>
              <h3 id="market-cap">R$ --</h3>
            </div>
            <div class="metric-card">
              <p><i class="fas fa-exchange-alt"></i> Volume 24h</p>
              <h3 id="volume">R$ --</h3>
            </div>
            <div class="metric-card">
              <p><i class="fas fa-boxes"></i> Fornecimento</p>
              <h3 id="supply">--</h3>
            </div>
          </div>
        </div>

        <!-- Chart -->
        <div class="card full-width-card">
          <div class="chart-header">
            <h2><i class="fas fa-chart-line"></i> Histórico de Preços (7 Dias)</h2>
            <div class="chart-controls">
              <select id="cryptoSelect" class="crypto-select">
                <option value="bitcoin">Bitcoin (BTC)</option>
                <option value="ethereum">Ethereum (ETH)</option>
                <option value="binancecoin">BNB (BNB)</option>
                <option value="solana">Solana (SOL)</option>
                <option value="cardano">Cardano (ADA)</option>
                <option value="ripple">XRP (XRP)</option>
                <option value="dogecoin">Dogecoin (DOGE)</option>
                <option value="polkadot">Polkadot (DOT)</option>
                <option value="litecoin">Litecoin (LTC)</option>
                <option value="chainlink">Chainlink (LINK)</option>
              </select>
              <button id="refreshChart" class="btn-icon" title="Atualizar gráfico">
                <i class="fas fa-sync-alt"></i>
              </button>
            </div>
          </div>

          <div class="chart-stats" id="chartStats">
            <div class="chart-stat">
              <span class="stat-label">Preço Atual</span>
              <span class="stat-value" id="currentPrice">R$ --</span>
            </div>
            <div class="chart-stat">
              <span class="stat-label">Variação 7D</span>
              <span class="stat-value" id="priceChange">--%</span>
            </div>
            <div class="chart-stat">
              <span class="stat-label">Mínima 7D</span>
              <span class="stat-value" id="minPrice">R$ --</span>
            </div>
            <div class="chart-stat">
              <span class="stat-label">Máxima 7D</span>
              <span class="stat-value" id="maxPrice">R$ --</span>
            </div>
          </div>

          <div class="chart-container">
            <canvas id="graficoBTC"></canvas>
          </div>

          <div class="chart-footer">
            <div class="time-filters">
              <button class="time-btn active" data-days="7">7D</button>
              <button class="time-btn" data-days="30">30D</button>
              <button class="time-btn" data-days="90">90D</button>
            </div>
            <span class="chart-update">Atualizado: <span id="chartUpdateTime">--:--</span></span>
          </div>
        </div>
      </div>
    </section>

    <!-- SEÇÃO 2: ÍNDICES DE MERCADO -->
    <section id="market-indices">
      <h2 class="section-title"><i class="fas fa-globe"></i> Índices de Mercado</h2>

      <div class="cards-grid">
        <!-- Índices de Mercado -->
        <div class="card full-width-card">
          <div class="indices-header">
            <div class="indices-controls">
            </div>
          </div>

          <div class="market-indices-grid">
            <!-- Dominância BTC -->
            <div index-card="index-card">
              <div class="index-header">
                <div class="index-title">
                  <i class="fab fa-bitcoin"></i>
                  <h3>Dominância Bitcoin</h3>
                </div>
                <div class="current-value" id="btcDominanceValue">
                  <span class="value">--%</span>
                  <span class="trend" id="btcDominanceTrend"></span>
                </div>
              </div>

              <div class="index-chart">
                <div class="chart-progress">
                  <div class="progress-bar">
                    <div class="progress-fill" id="btcDominanceBar"></div>
                  </div>
                  <div class="chart-markers">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                  </div>
                </div>
              </div>

              <div class="index-analysis">
                <div class="analysis-item">
                  <span class="label">Tendência:</span>
                  <span class="value" id="btcDominanceTrendText">--</span>
                </div>
                <div class="analysis-item">
                  <span class="label">Média 30D:</span>
                  <span class="value" id="btcDominanceAverage">--%</span>
                </div>
              </div>
            </div>

            <!-- Altcoin Season -->
            <div class="index-card">
              <div class="index-header">
                <div class="index-title">
                  <i class="fas fa-calendar-alt"></i>
                  <h3>Altcoin Season</h3>
                </div>
                <div class="current-value" id="totalMarketCap">
                  <span class="value">$--.--B</span>
                </div>
              </div>

              <div class="season-meter">
                <div class="meter-scale">
                  <div class="meter-fill" id="seasonIndicator"></div>
                </div>
                <div class="meter-labels">
                  <span>Bitcoin Dominante</span>
                  <span>Altcoin Season</span>
                </div>
              </div>

              <div class="season-status">
                <div class="status-badge" id="seasonStatusBadge">
                  <i class="fas fa-question"></i>
                  <span id="seasonStatusText">Analisando...</span>
                </div>
                <div class="season-stats">
                  <div class="stat">
                    <span>BTC Dominance</span>
                    <strong id="btcDominancePercent">--%</strong>
                  </div>
                  <div class="stat">
                    <span>Altcoin Dominance</span>
                    <strong id="altcoinDominancePercent">--%</strong>
                  </div>
                </div>
              </div>
            </div>

            <!-- Fear & Greed Index -->
            <div class="index-card">
              <div class="index-header">
                <div class="index-title">
                  <i class="fas fa-brain"></i>
                  <h3>Medo e Ganância</h3>
                </div>
                <div class="current-value" id="fearGreedValue">
                  <span class="value">--</span>
                </div>
              </div>

              <div class="fear-greed-meter">
                <div class="meter-scale-fg">
                  <div class="meter-fill-fg" id="fearGreedIndicator"></div>
                </div>
                <div class="fg-labels">
                  <span>Medo Extremo</span>
                  <span>Neutro</span>
                  <span>Ganância Extrema</span>
                </div>
              </div>

              <div class="fear-greed-analysis">
                <div class="fg-status" id="fearGreedStatus">Carregando...</div>
                <div class="fg-description" id="fearGreedDescription">
                  Indicador de sentimentos do mercado
                </div>
              </div>
            </div>

            <!-- Total Market Cap -->
            <div class="index-card">
              <div class="index-header">
                <div class="index-title">
                  <i class="fas fa-chart-pie"></i>
                  <h3>Market Cap Total</h3>
                </div>
                <div class="current-value" id="globalMarketCap">
                  <span class="value">$--.--T</span>
                </div>
              </div>

              <div class="market-cap-stats">
                <div class="cap-stat">
                  <div class="stat-icon">₿</div>
                  <div class="stat-info">
                    <span>Bitcoin</span>
                    <strong id="btcMarketCap">$--.--B</strong>
                  </div>
                </div>
                <div class="cap-stat">
                  <div class="stat-icon">Ξ</div>
                  <div class="stat-info">
                    <span>Ethereum</span>
                    <strong id="ethMarketCap">$--.--B</strong>
                  </div>
                </div>
                <div class="cap-stat">
                  <div class="stat-icon">★</div>
                  <div class="stat-info">
                    <span>Altcoins</span>
                    <strong id="altcoinMarketCap">$--.--T</strong>
                  </div>
                </div>
              </div>

              <div class="market-cap-change">
                <span>Variação 24h:</span>
                <strong id="marketCapChange">--%</strong>
              </div>
            </div>
          </div>

          <div class="indices-footer">
            <div class="update-info">
              <i class="fas fa-clock"></i>
              <span>Atualizado: <span id="lastUpdateTime">--:--:--</span></span>
            </div>
            <div class="data-source">
              <span>Fonte: CoinGecko API</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SEÇÃO 3: FERRAMENTAS DO INVESTIDOR -->
    <section id="tools-section">
      <h2 class="section-title"><i class="fas fa-tools"></i> Ferramentas do Investidor</h2>

      <div class="tools-tabs">
        <button class="tool-tab active" data-tool="portfolio">Portfólio</button>
        <button class="tool-tab" data-tool="alerts">Alertas</button>
        <button class="tool-tab" data-tool="calculator">Calculadora</button>
        <button class="tool-tab" data-tool="risk">Gerenciador de Risco</button>
      </div>

      <div class="tool-content">
        <!-- Portfólio Simulador -->
        <div class="tool-panel active" id="portfolio-tool">
          <div class="card">
            <div class="portfolio-header">
              <h2><i class="fas fa-chart-pie"></i> Meu Portfólio</h2>
              <div class="portfolio-stats" id="portfolioStats">
                <div class="stat-card">
                  <span class="stat-label">Valor Total</span>
                  <span class="stat-value" id="portfolioTotal">R$ 0,00</span>
                </div>
                <div class="stat-card">
                  <span class="stat-label">Lucro/Prejuízo</span>
                  <span class="stat-value" id="portfolioProfit">R$ 0,00</span>
                </div>
                <div class="stat-card">
                  <span class="stat-label">Variação</span>
                  <span class="stat-value" id="portfolioChange">0.00%</span>
                </div>
              </div>
            </div>

            <div class="portfolio-controls">
              <button id="addAsset" class="btn btn-primary">
                <i class="fas fa-plus"></i> Adicionar Ativo
              </button>
              <button id="refreshPortfolio" class="btn btn-secondary">
                <i class="fas fa-sync-alt"></i> Atualizar
              </button>
              <button id="exportPortfolio" class="btn btn-outline">
                <i class="fas fa-download"></i> Exportar
              </button>
            </div>

            <div class="portfolio-content">
              <div class="portfolio-chart-section">
                <div class="chart-container">
                  <canvas id="portfolioChart"></canvas>
                </div>
                <div class="chart-legend" id="chartLegend"></div>
              </div>

              <div class="portfolio-table-section">
                <div class="table-responsive">
                  <table class="portfolio-table">
                    <thead>
                      <tr>
                        <th>Ativo</th>
                        <th>Quantidade</th>
                        <th>Preço Médio</th>
                        <th>Valor Investido</th>
                        <th>Valor Atual</th>
                        <th>Variação</th>
                        <th>Ações</th>
                      </tr>
                    </thead>
                    <tbody id="portfolioAssets">
                      <!-- Dados dinâmicos -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="portfolio-empty" id="portfolioEmpty">
              <i class="fas fa-coins" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 20px;"></i>
              <h3>Portfólio Vazio</h3>
              <p>Adicione seu primeiro ativo para começar a acompanhar seus investimentos</p>
              <button id="addFirstAsset" class="btn btn-primary">
                <i class="fas fa-plus"></i> Adicionar Primeiro Ativo
              </button>
            </div>
          </div>
        </div>

        <!-- Alertas de Preço -->
        <div class="tool-panel" id="alerts-tool">
          <div class="card hidden-in-beginner">
            <div class="alerts-header">
              <h2><i class="fas fa-bell"></i> Alertas de Preço</h2>
              <div class="alerts-badge" id="alertsCount">0</div>
            </div>

            <div class="alerts-controls">
              <button id="testNotificationBtn" class="btn btn-outline" title="Testar notificação">
                <i class="fas fa-bell"></i> Testar Notificação
              </button>
              <button id="enableNotificationsBtn" class="btn btn-primary" style="display: none;">
                <i class="fas fa-check-circle"></i> Ativar Notificações
              </button>
            </div>

            <div class="alerts-filters">
              <input type="text" id="alertsSearch" placeholder="Buscar alertas..." class="form-input">
              <select id="alertsFilter" class="form-input">
                <option value="all">Todos os alertas</option>
                <option value="active">Ativos</option>
                <option value="triggered">Disparados</option>
              </select>
            </div>

            <div id="alertsContainer" class="alerts-container">
              <div class="alerts-empty" id="alertsEmpty">
                <i class="fas fa-bell-slash"
                  style="font-size: 3rem; color: var(--text-muted); margin-bottom: 15px;"></i>
                <h3>Nenhum alerta criado</h3>
                <p>Crie seu primeiro alerta para ser notificado sobre movimentos de preço</p>
              </div>
            </div>

            <div class="alerts-footer">
              <button id="addAlertBtn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Criar Alerta
              </button>
              <span class="alerts-info" id="alertsLastCheck"></span>
            </div>
          </div>
        </div>

        <!-- Calculadora de Trade -->
        <div class="tool-panel" id="calculator-tool">
          <div class="card hidden-in-beginner">
            <div class="calculator-header">
              <h2><i class="fas fa-calculator"></i> Calculadora de Trade Avançada</h2>
              <div class="calculator-actions">
                <button id="calcSwitchMode" class="btn-icon" title="Alternar modo">
                  <i class="fas fa-exchange-alt"></i>
                </button>
                <button id="calcReset" class="btn-icon" title="Limpar campos">
                  <i class="fas fa-undo"></i>
                </button>
              </div>
            </div>

            <div class="calculator-tabs">
              <button class="calc-tab active" data-tab="basic">Básico</button>
              <button class="calc-tab" data-tab="advanced">Avançado</button>
              <button class="calc-tab" data-tab="fees">Com Taxas</button>
            </div>

            <div class="calculator-content">
              <!-- ABA BÁSICA -->
              <div class="calc-tab-content active" id="tab-basic">
                <div class="calc-grid">
                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-coins"></i>
                      Criptomoeda
                    </label>
                    <select id="calcCoin" class="calc-select">
                      <option value="bitcoin">Bitcoin (BTC)</option>
                      <option value="ethereum">Ethereum (ETH)</option>
                      <option value="binancecoin">BNB (BNB)</option>
                      <option value="solana">Solana (SOL)</option>
                      <option value="cardano">Cardano (ADA)</option>
                      <option value="ripple">XRP (XRP)</option>
                      <option value="dogecoin">Dogecoin (DOGE)</option>
                      <option value="polkadot">Polkadot (DOT)</option>
                      <option value="litecoin">Litecoin (LTC)</option>
                      <option value="chainlink">Chainlink (LINK)</option>
                    </select>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-hashtag"></i>
                      Quantidade
                    </label>
                    <input type="number" id="calcAmount" class="calc-input" placeholder="0.00" step="any" min="0">
                    <span class="calc-hint" id="amountValue">0.00</span>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-arrow-down"></i>
                      Preço de Compra (R$)
                    </label>
                    <input type="number" id="calcBuyPrice" class="calc-input" placeholder="0.00" step="any" min="0">
                    <span class="calc-hint" id="buyPriceValue">R$ 0,00</span>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-arrow-up"></i>
                      Preço de Venda (R$)
                    </label>
                    <input type="number" id="calcSellPrice" class="calc-input" placeholder="0.00" step="any" min="0">
                    <span class="calc-hint" id="sellPriceValue">R$ 0,00</span>
                  </div>
                </div>
              </div>

              <!-- ABA AVANÇADA -->
              <div class="calc-tab-content" id="tab-advanced">
                <div class="calc-grid">
                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-percentage"></i>
                      Alvo de Lucro (%)
                    </label>
                    <input type="number" id="calcTargetProfit" class="calc-input" placeholder="0.00" step="0.01"
                      min="0">
                    <button class="calc-btn-small" onclick="calculateTargetPrice()">
                      <i class="fas fa-calculator"></i> Calcular
                    </button>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-balance-scale"></i>
                      Preço Alvo (R$)
                    </label>
                    <input type="number" id="calcTargetPrice" class="calc-input" placeholder="0.00" step="any" min="0"
                      readonly>
                    <span class="calc-hint" id="targetPriceInfo"></span>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-exclamation-triangle"></i>
                      Stop Loss (R$)
                    </label>
                    <input type="number" id="calcStopLoss" class="calc-input" placeholder="0.00" step="any" min="0">
                    <span class="calc-hint" id="stopLossInfo"></span>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-robot"></i>
                      Risco/Retorno
                    </label>
                    <div class="calc-risk-reward">
                      <span id="riskRewardRatio">1:0</span>
                      <div class="risk-meter">
                        <div class="risk-fill" id="riskMeter"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ABA TAXAS -->
              <div class="calc-tab-content" id="tab-fees">
                <div class="calc-grid">
                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-exchange-alt"></i>
                      Exchange
                    </label>
                    <select id="calcExchange" class="calc-select">
                      <option value="binance">Binance (0.1%)</option>
                      <option value="bybit">Bybit (0.1%)</option>
                      <option value="mercado-bitcoin">Mercado Bitcoin (0.7%)</option>
                      <option value="foxbit">Foxbit (0.5%)</option>
                      <option value="custom">Personalizada</option>
                    </select>
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-percentage"></i>
                      Taxa de Compra (%)
                    </label>
                    <input type="number" id="calcBuyFee" class="calc-input" value="0.1" step="0.01" min="0" max="10">
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-percentage"></i>
                      Taxa de Venda (%)
                    </label>
                    <input type="number" id="calcSellFee" class="calc-input" value="0.1" step="0.01" min="0" max="10">
                  </div>

                  <div class="calc-group">
                    <label class="calc-label">
                      <i class="fas fa-wallet"></i>
                      Taxa de Saque
                    </label>
                    <input type="number" id="calcWithdrawalFee" class="calc-input" value="0" step="any" min="0">
                    <span class="calc-hint">R$ fixo ou %</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="calculator-actions-main">
              <button id="calcCalculate" class="btn btn-primary calc-btn-main">
                <i class="fas fa-calculator"></i> Calcular Trade
              </button>
              <button id="calcSave" class="btn btn-outline">
                <i class="fas fa-save"></i> Salvar
              </button>
            </div>

            <div class="calculator-results" id="calcResult">
              <div class="results-header">
                <h3><i class="fas fa-chart-line"></i> Resultado do Trade</h3>
                <span class="results-badge" id="resultBadge">NEUTRO</span>
              </div>

              <div class="results-grid">
                <div class="result-card">
                  <div class="result-icon" style="background: rgba(0, 255, 136, 0.1);">
                    <i class="fas fa-money-bill-wave" style="color: #00ff88;"></i>
                  </div>
                  <div class="result-info">
                    <span class="result-label">Investimento Total</span>
                    <span class="result-value" id="resultInvestment">R$ 0,00</span>
                  </div>
                </div>

                <div class="result-card">
                  <div class="result-icon" style="background: rgba(255, 193, 7, 0.1);">
                    <i class="fas fa-hand-holding-usd" style="color: #ffc107;"></i>
                  </div>
                  <div class="result-info">
                    <span class="result-label">Valor Final</span>
                    <span class="result-value" id="resultFinalValue">R$ 0,00</span>
                  </div>
                </div>

                <div class="result-card">
                  <div class="result-icon" style="background: rgba(0, 255, 136, 0.1);">
                    <i class="fas fa-chart-line" style="color: #00ff88;"></i>
                  </div>
                  <div class="result-info">
                    <span class="result-label">Lucro/Prejuízo</span>
                    <span class="result-value" id="resultProfit">R$ 0,00</span>
                  </div>
                </div>

                <div class="result-card">
                  <div class="result-icon" style="background: rgba(41, 128, 185, 0.1);">
                    <i class="fas fa-percentage" style="color: #2980b9;"></i>
                  </div>
                  <div class="result-info">
                    <span class="result-label">Variação</span>
                    <span class="result-value" id="resultPercentage">0.00%</span>
                  </div>
                </div>
              </div>

              <div class="results-details">
                <div class="detail-row">
                  <span>Taxas Totais:</span>
                  <span id="resultFees">R$ 0,00</span>
                </div>
                <div class="detail-row">
                  <span>Risco/Retorno:</span>
                  <span id="resultRiskReward">1:0</span>
                </div>
                <div class="detail-row">
                  <span>Preço de Break-even:</span>
                  <span id="resultBreakEven">R$ 0,00</span>
                </div>
                <div class="detail-row">
                  <span>Resultado Líquido:</span>
                  <span id="resultNet">R$ 0,00</span>
                </div>
              </div>

              <div class="results-analysis">
                <h4>📊 Análise do Trade</h4>
                <p id="resultAnalysis">Preencha os campos para analisar seu trade...</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Risk Calculator -->
        <div class="tool-panel" id="risk-tool">
          <div class="card hidden-in-beginner">
            <div class="risk-header">
              <h2><i class="fas fa-shield-alt"></i> Gerenciador de Risco</h2>
              <div class="risk-badge" id="riskLevel">MODERADO</div>
            </div>

            <div class="risk-controls">
              <div class="risk-tabs">
                <button class="risk-tab active" data-tab="basic">Básico</button>
                <button class="risk-tab" data-tab="advanced">Avançado</button>
                <button class="risk-tab" data-tab="portfolio">Portfólio</button>
              </div>
            </div>

            <div class="risk-content">
              <!-- ABA BÁSICA -->
              <div class="risk-tab-content active" id="tab-basic">
                <div class="risk-grid">
                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-wallet"></i>
                      Capital Total (R$)
                    </label>
                    <input type="number" id="totalCapital" class="risk-input" placeholder="10.000,00" step="any"
                      min="0">
                    <div class="risk-hint">Seu capital total para investir</div>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-coins"></i>
                      Criptomoeda
                    </label>
                    <select id="riskCoin" class="risk-select">
                      <option value="bitcoin">Bitcoin (BTC)</option>
                      <option value="ethereum">Ethereum (ETH)</option>
                      <option value="solana">Solana (SOL)</option>
                      <option value="cardano">Cardano (ADA)</option>
                      <option value="binancecoin">BNB (BNB)</option>
                      <option value="ripple">XRP (XRP)</option>
                      <option value="dogecoin">Dogecoin (DOGE)</option>
                      <option value="polkadot">Polkadot (DOT)</option>
                    </select>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-percentage"></i>
                      Risco por Trade (%)
                    </label>
                    <input type="range" id="riskPerTrade" class="risk-slider" min="0.5" max="5" step="0.5" value="2">
                    <div class="slider-values">
                      <span>0.5%</span>
                      <span id="riskValue">2%</span>
                      <span>5%</span>
                    </div>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-user"></i>
                      Perfil de Risco
                    </label>
                    <select id="riskProfile" class="risk-select">
                      <option value="conservador">Conservador (1%)</option>
                      <option value="moderado" selected>Moderado (2%)</option>
                      <option value="arrojado">Arrojado (3%)</option>
                      <option value="agressivo">Agressivo (4-5%)</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- ABA AVANÇADA -->
              <div class="risk-tab-content" id="tab-advanced">
                <div class="risk-grid">
                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-chart-line"></i>
                      Volatilidade Esperada (%)
                    </label>
                    <input type="number" id="expectedVolatility" class="risk-input" value="3.0" step="0.1" min="0.1"
                      max="20">
                    <div class="risk-hint">Baseado em dados históricos</div>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-target"></i>
                      Stop Loss (%)
                    </label>
                    <input type="number" id="stopLossPercent" class="risk-input" value="15" step="1" min="1" max="50">
                    <div class="risk-hint">Distância do stop loss</div>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-expand-arrows-alt"></i>
                      Alavancagem
                    </label>
                    <select id="leverage" class="risk-select">
                      <option value="1">1x (Spot)</option>
                      <option value="3">3x</option>
                      <option value="5">5x</option>
                      <option value="10">10x</option>
                      <option value="20">20x</option>
                      <option value="50">50x</option>
                      <option value="100">100x</option>
                    </select>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-balance-scale"></i>
                      Risco/Retorno
                    </label>
                    <select id="riskReward" class="risk-select">
                      <option value="1">1:1</option>
                      <option value="1.5">1:1.5</option>
                      <option value="2">1:2</option>
                      <option value="3" selected>1:3</option>
                      <option value="4">1:4</option>
                      <option value="5">1:5</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- ABA PORTFÓLIO -->
              <div class="risk-tab-content" id="tab-portfolio">
                <div class="risk-grid">
                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-chart-pie"></i>
                      Alocação por Moeda (%)
                    </label>
                    <input type="number" id="allocationPercent" class="risk-input" value="20" step="1" min="1"
                      max="100">
                    <div class="risk-hint">Máximo por criptomoeda</div>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-layer-group"></i>
                      Diversificação
                    </label>
                    <select id="diversification" class="risk-select">
                      <option value="low">Baixa (1-3 moedas)</option>
                      <option value="medium" selected>Média (4-7 moedas)</option>
                      <option value="high">Alta (8+ moedas)</option>
                    </select>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-clock"></i>
                      Horizonte Temporal
                    </label>
                    <select id="timeHorizon" class="risk-select">
                      <option value="short">Curto prazo (< 1 mês)</option>
                      <option value="medium">Médio prazo (1-6 meses)</option>
                      <option value="long" selected>Longo prazo (> 6 meses)</option>
                    </select>
                  </div>

                  <div class="risk-group">
                    <label class="risk-label">
                      <i class="fas fa-bolt"></i>
                      Estratégia
                    </label>
                    <select id="strategy" class="risk-select">
                      <option value="hodl">HODL</option>
                      <option value="swing">Swing Trade</option>
                      <option value="day">Day Trade</option>
                      <option value="scalping">Scalping</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="risk-actions">
              <button id="calculateRisk" class="btn btn-primary risk-btn-main">
                <i class="fas fa-calculator"></i> Calcular Risco
              </button>
              <button id="resetRisk" class="btn btn-outline">
                <i class="fas fa-undo"></i> Limpar
              </button>
            </div>

            <div class="risk-results" id="riskResult">
              <div class="results-header">
                <h3><i class="fas fa-analytics"></i> Análise de Risco</h3>
                <div class="risk-score" id="riskScore">65/100</div>
              </div>

              <div class="risk-metrics">
                <div class="metric-card">
                  <div class="metric-icon" style="background: rgba(0, 255, 136, 0.1);">
                    <i class="fas fa-money-bill-wave" style="color: #00ff88;"></i>
                  </div>
                  <div class="metric-info">
                    <span class="metric-label">Valor por Trade</span>
                    <span class="metric-value" id="riskValuePerTrade">R$ 0,00</span>
                  </div>
                </div>

                <div class="metric-card">
                  <div class="metric-icon" style="background: rgba(255, 193, 7, 0.1);">
                    <i class="fas fa-exclamation-triangle" style="color: #ffc107;"></i>
                  </div>
                  <div class="metric-info">
                    <span class="metric-label">Risco Máximo</span>
                    <span class="metric-value" id="riskMaxLoss">R$ 0,00</span>
                  </div>
                </div>

                <div class="metric-card">
                  <div class="metric-icon" style="background: rgba(41, 128, 185, 0.1);">
                    <i class="fas fa-chart-line" style="color: #2980b9;"></i>
                  </div>
                  <div class="metric-info">
                    <span class="metric-label">Posição Size</span>
                    <span class="metric-value" id="riskPositionSize">0.0000</span>
                  </div>
                </div>

                <div class="metric-card">
                  <div class="metric-icon" style="background: rgba(156, 39, 176, 0.1);">
                    <i class="fas fa-target" style="color: #9c27b0;"></i>
                  </div>
                  <div class="metric-info">
                    <span class="metric-label">Stop Loss</span>
                    <span class="metric-value" id="riskStopPrice">R$ 0,00</span>
                  </div>
                </div>
              </div>

              <div class="risk-analysis">
                <h4>📊 Recomendações</h4>
                <div class="recommendation-list" id="riskRecommendations">
                  <div class="recommendation-item">
                    <i class="fas fa-check-circle" style="color: #00ff88;"></i>
                    <span>Carregando análise...</span>
                  </div>
                </div>
              </div>

              <div class="risk-breakdown">
                <h4>🔍 Detalhamento</h4>
                <div class="breakdown-grid">
                  <div class="breakdown-item">
                    <span>Volatilidade do Ativo:</span>
                    <span id="breakdownVolatility">--%</span>
                  </div>
                  <div class="breakdown-item">
                    <span>Risco por Trade:</span>
                    <span id="breakdownRiskPerTrade">--%</span>
                  </div>
                  <div class="breakdown-item">
                    <span>Alavancagem:</span>
                    <span id="breakdownLeverage">--x</span>
                  </div>
                  <div class="breakdown-item">
                    <span>Risco/Retorno:</span>
                    <span id="breakdownRiskReward">1:--</span>
                  </div>
                </div>
              </div>

              <div class="risk-protection">
                <h4>🛡️ Proteção</h4>
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 10px;">
                  Proteja seus investimentos com stop-loss na
                  <a href="https://www.bybit.com/invite?ref=XQPXAMR" target="_blank"
                    style="color: var(--primary); text-decoration: none;">
                    <strong>Bybit</strong>
                  </a>
                  e outras ferramentas profissionais.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SEÇÃO 4: EDUCAÇÃO E NOTÍCIAS -->
    <section id="education-news">
      <h2 class="section-title"><i class="fas fa-graduation-cap"></i> Educação & Notícias</h2>

      <div class="cards-grid">
        <!-- News Section -->
        <div class="card two-column-card">
          <h2><i class="fas fa-newspaper"></i> Últimas Notícias</h2>
          <div id="news-container">
            <div class="news-loading">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Carregando notícias...</p>
            </div>
          </div>

          <!-- Seção Educativa -->
          <div class="card">
            <h2><i class="fas fa-graduation-cap"></i> Educação Cripto</h2>

            <!-- Abas de navegação -->
            <div class="tab-buttons">
              <button class="tab-btn active" onclick="openTab('glossario')">Glossário</button>
              <button class="tab-btn" onclick="openTab('tutoriais')">Tutoriais</button>
            </div>

            <!-- Conteúdo do Glossário -->
            <div id="glossario" class="tab-content" style="display: block;">
              <div class="search-box">
                <input type="text" id="glossarioSearch" placeholder="Buscar termo..." class="form-input">
                <i class="fas fa-search"></i>
              </div>
              <div class="glossario-grid" id="glossarioContent"></div>
            </div>

            <!-- Conteúdo dos Tutoriais -->
            <div id="tutoriais" class="tab-content">
              <div class="tutoriais-grid" id="tutoriaisContent"></div>
            </div>
          </div>
        </div>
    </section>

    <!-- SEÇÃO 5: PLATAFORMAS PARCEIRAS -->
    <section id="partners">
      <h2 class="section-title"><i class="fas fa-star"></i> Plataformas Parceiras</h2>
      <p style="color: var(--text-muted); margin-top: -15px; margin-bottom: 20px;">Plataformas recomendadas com
        condições especiais para usuários TrackCrypto</p>

      <!-- Adicione isso perto dos links de exchanges -->
      <div
        style="font-size: 0.8rem; color: var(--text-secondary); margin: 10px 0; padding: 10px; background: rgba(0,255,136,0.1); border-radius: 8px;">
        <i class="fas fa-info-circle"></i>
        <strong>Transparência:</strong> Alguns links são de afiliados - podemos receber comissão sem custo adicional
        para você.
      </div>

      <div class="card partner-section">
        <!-- Binance -->
        <div class="featured-partner">
          <div class="featured-header">
            <img src="assets/logo-binance.png" alt="Binance" width="50">
            <div class="featured-info">
              <h3>Binance - Parceira Oficial</h3>
              <div class="partner-rating">4.8 ★</div>
            </div>
            <span class="featured-badge">Recomendada</span>
          </div>

          <div class="featured-details">
            <div class="featured-benefits">
              <div class="benefit">
                <i class="fas fa-percentage"></i>
                <span>Taxa de trading: 0.1%</span>
              </div>
              <div class="benefit">
                <i class="fas fa-coins"></i>
                <span>+500 criptomoedas</span>
              </div>
              <div class="benefit">
                <i class="fas fa-globe"></i>
                <span>Disponível globalmente</span>
              </div>
              <div class="benefit">
                <i class="fas fa-bolt"></i>
                <span>Taxas reduzidas para usuários TrackCrypto</span>
              </div>
            </div>

            <a href="https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0062C7L8QA" target="_blank"
              class="featured-cta">
              <span class="cta-text">Negociar na Binance</span>
              <span class="cta-subtext">Taxas reduzidas</span>
              <i class="fas fa-arrow-right"></i>
            </a>

            <p class="user-count"><i class="fas fa-users"></i> 120+ usuários ativos hoje</p>
          </div>
        </div>

        <!-- Bybit -->
        <div class="featured-partner">
          <div class="featured-header">
            <img src="assets/logo-bybit.png" alt="Bybit" width="50">
            <div class="featured-info">
              <h3>Bybit</h3>
              <div class="partner-rating">4.6 ★</div>
            </div>
            <span class="featured-badge">Alavancagem</span>
          </div>

          <div class="featured-details">
            <div class="featured-benefits">
              <div class="benefit">
                <i class="fas fa-percentage"></i>
                <span>Taxa de trading: 0.1%</span>
              </div>
              <div class="benefit">
                <i class="fas fa-coins"></i>
                <span>+300 criptomoedas</span>
              </div>
              <div class="benefit">
                <i class="fas fa-chart-line"></i>
                <span>Alavancagem até 25x</span>
              </div>
              <div class="benefit">
                <i class="fas fa-shield-alt"></i>
                <span>Stop-loss avançado</span>
              </div>
            </div>

            <a href="https://www.bybit.com/invite?ref=XQPXAMR" target="_blank" class="featured-cta">
              <span class="cta-text">Negociar na Bybit</span>
              <span class="cta-subtext">Alavancagem 25x</span>
              <i class="fas fa-arrow-right"></i>
            </a>

            <p class="user-count"><i class="fas fa-users"></i> 85+ usuários ativos hoje</p>
          </div>
        </div>

        <!-- CoinBase -->
        <div class="featured-partner">
          <div class="featured-header">
            <img src="assets/logo-coinbase.png" alt="CoinBase" width="50">
            <div class="featured-info">
              <h3>CoinBase</h3>
              <div class="partner-rating">4.5 ★</div>
            </div>
            <span class="featured-badge">Iniciantes</span>
          </div>

          <div class="featured-details">
            <div class="featured-benefits">
              <div class="benefit">
                <i class="fas fa-lock"></i>
                <span>Segurança premium</span>
              </div>
              <div class="benefit">
                <i class="fas fa-coins"></i>
                <span>+200 criptomoedas</span>
              </div>
              <div class="benefit">
                <i class="fas fa-graduation-cap"></i>
                <span>Ideal para iniciantes</span>
              </div>
              <div class="benefit">
                <i class="fas fa-mobile-alt"></i>
                <span>App intuitivo</span>
              </div>
            </div>

            <a href="https://advanced.coinbase.com/join/4UFL4GW" target="_blank" class="featured-cta">
              <span class="cta-text">Negociar na CoinBase</span>
              <span class="cta-subtext">App intuitivo</span>
              <i class="fas fa-arrow-right"></i>
            </a>

            <p class="user-count"><i class="fas fa-users"></i> 65+ usuários ativos hoje</p>
          </div>
        </div>

        <!-- Mercado Bitcoin -->
        <div class="featured-partner">
          <div class="featured-header">
            <img src="assets/logo-mercadobit.png" alt="Mercado Bitcoin" width="50">
            <div class="featured-info">
              <h3>Mercado Bitcoin</h3>
              <div class="partner-rating">4.5 ★</div>
            </div>
            <span class="featured-badge">Brasil</span>
          </div>

          <div class="featured-details">
            <div class="featured-benefits">
              <div class="benefit">
                <i class="fas fa-flag"></i>
                <span>Maior exchange brasileira</span>
              </div>
              <div class="benefit">
                <i class="fas fa-coins"></i>
                <span>+100 criptomoedas</span>
              </div>
              <div class="benefit">
                <i class="fas fa-hand-holding-usd"></i>
                <span>PIX integrado</span>
              </div>
              <div class="benefit">
                <i class="fas fa-headset"></i>
                <span>Suporte em português</span>
              </div>
            </div>

            <a href="#" target="_blank" class="featured-cta">
              <span class="cta-text">Negociar na MB</span>
              <span class="cta-subtext">PIX integrado</span>
              <i class="fas fa-arrow-right"></i>
            </a>

            <p class="user-count"><i class="fas fa-users"></i> 90+ usuários ativos hoje</p>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-content">

        <!-- Adicione isso em uma seção lateral ou footer -->
        <!-- Adicione isso no header do dashboard -->
<div class="transparency-badges">
  <div class="badge">
    <span class="badge-icon">⚡</span>
    <span class="badge-text">
      <strong>WebSocket Live</strong>
      <span id="latency">Latência: 120ms</span>
    </span>
  </div>
  
  <div class="badge">
    <span class="badge-icon">🔄</span>
    <span class="badge-text">
      <strong>Atualização: 500ms</strong>
      <span id="last-update">Última: 10:30:45</span>
    </span>
  </div>
  
  <div class="badge">
    <span class="badge-icon">📡</span>
    <span class="badge-text">
      <strong>API: CoinGecko</strong>
      <span>+ Exchange APIs</span>
    </span>
  </div>
  
  <div class="badge">
    <span class="badge-icon">⏱️</span>
    <span class="badge-text">
      <strong>Uptime: 99.9%</strong>
      <span>30 dias</span>
    </span>
  </div>
</div>
        <!-- Seção de Feedback -->
        <div class="footer-section">
          <h4><i class="fas fa-comment-dots"></i> Deixe seu Feedback</h4>
          <form action="https://formsubmit.co/trackcripto@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_next" value="https://trackcripto.netlify.app/">
            <input type="hidden" name="_subject" value="Novo Feedback - TrackCrypto">

            <input type="text" name="name" placeholder="Seu nome" class="form-input" required>
            <input type="email" name="email" placeholder="Seu email" class="form-input" required>
            <textarea name="feedback" placeholder="Sua mensagem..." class="form-input" rows="3" required></textarea>

            <button type="submit" class="btn" style="margin-top: 10px;">
              <i class="fas fa-paper-plane"></i> Enviar Mensagem
            </button>
          </form>
        </div>

        <!-- Seção da Logo -->
        <div class="footer-section">
          <h4><span class="logo-track">Track</span><span class="logo-crypto">Crypto</span></h4>
          <p>Sua ferramenta completa para análise de criptomoedas</p>
        </div>

        <!-- Seção de Links -->
        <div class="footer-section">
          <h4><i class="fas fa-link"></i> Links Rápidos</h4>
          <ul>
            <li><a href="../termos.html">Termos de Uso</a></li>
            <li><a href="../privacidade.html">Política de Privacidade</a></li>
            <li><a href="https://forms.gle/TXwWxECcrrwgKsnTA" target="_blank">Formulário de Contato</a></li>
            <li><a href="../suporte.html">Suporte</a></li>
          </ul>
        </div>

        <!-- Seção de Apoio -->
        <div class="footer-section">
          <h4><i class="fas fa-heart"></i> Apoie o Projeto</h4>
          <p>Chave PIX:</p>
          <p class="pix-code">27f3b45c-eb2f-4be8-b337-d10398c9eb47 </p>
          <button onclick="copyPix()" class="btn" style="margin-top: 10px;">
            <i class="fas fa-copy"></i> Copiar PIX
          </button>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 TrackCrypto. Todos os direitos reservados.</p>
      </div>
    </footer>


    <!-- Scripts externos -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Scripts locais -->
    <script src="script.js"></script>

    <!-- Botão flutuante do chat -->
    <button id="chatToggle" class="chat-toggle-btn">
      <i class="fas fa-robot"></i>
    </button>

    <!-- Container do Chat IA -->
    <div id="aiChatContainer" class="ai-chat-container">
      <div class="chat-header">
        <h3>Assistente IA</h3>
        <button id="closeChat" class="chat-close-btn" aria-label="Fechar chat">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div id="chatContent" class="chat-content">
        <!-- As mensagens aparecem aqui -->
      </div>

      <div class="chat-input-container">
        <input id="userInput" type="text" placeholder="Digite sua mensagem..." />
        <button id="sendMessage" aria-label="Enviar mensagem">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <script>
      // script.js - Otimizações de performance
      class PerformanceOptimizer {
        constructor() {
          this.charts = new Map();
          this.isVisible = new Map();
          this.observer = null;
        }

        init() {
          this.setupLazyLoading();
          this.setupChartOptimizations();
          this.setupConnectionMonitoring();
        }

        // Carregamento preguiçoso para gráficos
        setupLazyLoading() {
          this.observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const chartId = entry.target.dataset.chartId;
                this.loadChart(chartId);
                this.observer.unobserve(entry.target);
              }
            });
          }, { threshold: 0.1 });

          // Observar containers de gráficos
          document.querySelectorAll('.chart-container').forEach(container => {
            this.observer.observe(container);
          });
        }

        async loadChart(chartId) {
          // Carregar gráfico apenas quando visível
          const response = await fetch(`/api/chart-data/${chartId}`);
          const data = await response.json();
          this.renderChart(chartId, data);
        }

        // Otimizações específicas para Chart.js
        setupChartOptimizations() {
          // Configurações de performance para Chart.js
          Chart.defaults.plugins.tooltip.enabled = true;
          Chart.defaults.plugins.legend.position = 'top';
          Chart.defaults.maintainAspectRatio = false;
          Chart.defaults.animation.duration = 500;

          // Reduzir detalhes em dispositivos móveis
          if (window.innerWidth < 768) {
            Chart.defaults.elements.point.radius = 2;
            Chart.defaults.elements.line.tension = 0.4;
          }
        }

        setupConnectionMonitoring() {
          // Monitorar qualidade da conexão
          const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

          if (connection) {
            connection.addEventListener('change', () => {
              this.adjustDataQuality(connection.effectiveType);
            });
            this.adjustDataQuality(connection.effectiveType);
          }
        }

        adjustDataQuality(connectionType) {
          // Ajustar qualidade dos dados baseado na conexão
          const qualityMap = {
            'slow-2g': { dataPoints: 50, updateInterval: 10000 },
            '2g': { dataPoints: 100, updateInterval: 5000 },
            '3g': { dataPoints: 200, updateInterval: 3000 },
            '4g': { dataPoints: 500, updateInterval: 1000 },
            'ethernet': { dataPoints: 1000, updateInterval: 500 }
          };

          const settings = qualityMap[connectionType] || qualityMap['4g'];
          this.applyDataSettings(settings);
        }

        applyDataSettings(settings) {
          // Aplicar configurações de performance
          window.CHART_SETTINGS = settings;
        }
      }

      // Inicializar otimizador
      document.addEventListener('DOMContentLoaded', () => {
        new PerformanceOptimizer().init();
      });


      // chart-worker.js (arquivo separado)
      self.addEventListener('message', (e) => {
        const { type, data } = e.data;

        switch (type) {
          case 'PROCESS_CHART_DATA':
            const processed = processData(data);
            self.postMessage({ type: 'CHART_DATA_READY', data: processed });
            break;

          case 'CALCULATE_INDICATORS':
            const indicators = calculateIndicators(data);
            self.postMessage({ type: 'INDICATORS_READY', data: indicators });
            break;
        }
      });

      function processData(data) {
        // Processamento pesado em background
        return data.map(item => ({
          ...item,
          timestamp: new Date(item.timestamp),
          price: parseFloat(item.price)
        })).filter(item => !isNaN(item.price));
      }

      function calculateIndicators(data) {
        // Cálculos complexos de indicadores técnicos
        // ... código de análise técnica ...
        return indicators;
      }


      // on-chain-analytics.js
      class OnChainAnalytics {
        constructor() {
          this.cache = new Map();
          this.subscribers = new Set();
        }

        async init() {
          await this.setupRealTimeConnection();
          this.startDataCollection();
        }

        async setupRealTimeConnection() {
          // Conexão com APIs de blockchain
          this.socket = new WebSocket('wss://blockchain-websocket.com');

          this.socket.onmessage = (event) => {
            const data = JSON.parse(event.data);
            this.processRealTimeData(data);
          };

          this.socket.onopen = () => {
            this.subscribeToChannels();
          };
        }

        subscribeToChannels() {
          const channels = [
            'bitcoin-transactions',
            'exchange-flows',
            'wallet-activity',
            'miner-activity'
          ];

          channels.forEach(channel => {
            this.socket.send(JSON.stringify({
              action: 'subscribe',
              channel: channel
            }));
          });
        }

        processRealTimeData(data) {
          // Processar dados em tempo real
          switch (data.type) {
            case 'exchange_flow':
              this.updateExchangeFlow(data.data);
              break;
            case 'wallet_activity':
              this.updateWalletMetrics(data.data);
              break;
            case 'transaction_volume':
              this.updateTransactionMetrics(data.data);
              break;
          }

          // Notificar subscribers
          this.notifySubscribers(data);
        }

        async getHistoricalData(metric, timeframe = '7d') {
          const cacheKey = `${metric}-${timeframe}`;

          if (this.cache.has(cacheKey)) {
            return this.cache.get(cacheKey);
          }

          try {
            const response = await fetch(`/api/on-chain/${metric}?timeframe=${timeframe}`);
            const data = await response.json();

            this.cache.set(cacheKey, data);
            setTimeout(() => this.cache.delete(cacheKey), 300000); // 5min cache

            return data;
          } catch (error) {
            console.error('Error fetching historical data:', error);
            return null;
          }
        }

        // Métricas específicas
        async calculateExchangeFlow() {
          const data = await this.getHistoricalData('exchange_flow', '24h');
          return this.analyzeFlowPatterns(data);
        }

        async analyzeWalletBehavior() {
          const data = await this.getHistoricalData('wallet_activity', '30d');
          return this.identifyBehaviorPatterns(data);
        }

        // Notificar componentes interessados
        subscribe(callback) {
          this.subscribers.add(callback);
          return () => this.subscribers.delete(callback);
        }

        notifySubscribers(data) {
          this.subscribers.forEach(callback => callback(data));
        }
      }

      // Implementação mínima para começar
      const quickOnChainMetrics = {
        init() {
          this.setupBasicMetrics();
          setInterval(() => this.updateMetrics(), 30000);
        },

        async setupBasicMetrics() {
          // Métricas básicas para começar
          const metrics = await Promise.all([
            this.fetchSimpleMetric('exchange_flow'),
            this.fetchSimpleMetric('active_addresses'),
            this.fetchSimpleMetric('transaction_volume')
          ]);

          this.displayMetrics(metrics);
        },

        async fetchSimpleMetric(metric) {
          try {
            const response = await fetch(`https://api.blockchain.com/${metric}`);
            return await response.json();
          } catch (error) {
            return { value: 'N/A', trend: 'neutral' };
          }
        },

        displayMetrics(metrics) {
          // Atualizar a UI com métricas simples
          const containers = {
            'exchange_flow': '#exchange-flow',
            'active_addresses': '#holders-growth',
            'transaction_volume': '#transaction-fee'
          };

          metrics.forEach(metric => {
            const element = document.querySelector(containers[metric.name]);
            if (element) {
              element.textContent = metric.value;
              element.className = `metric-value ${metric.trend}`;
            }
          });
        }
      };

      // Iniciar quando a página carregar
      document.addEventListener('DOMContentLoaded', () => quickOnChainMetrics.init());

// Microinterações.js
class MicroInteractions {
    constructor() {
        this.setupHoverEffects();
        this.setupClickAnimations();
        this.setupDataUpdates();
    }

    setupHoverEffects() {
        // Efeito hover para cards
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
            });
        });
    }

    setupClickAnimations() {
        // Animação de clique para botões
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const x = e.clientX - btn.getBoundingClientRect().left;
                const y = e.clientY - btn.getBoundingClientRect().top;
                
                const ripple = document.createElement('span');
                ripple.classList.add('ripple-effect');
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                
                btn.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
        });
    }

    setupDataUpdates() {
        // Highlight em dados atualizados
        const observer = new MutationObserver((mutations) => {
            mutations.forEach(mutation => {
                if (mutation.type === 'characterData' || 
                    mutation.type === 'childList') {
                    const element = mutation.target;
                    if (element.classList.contains('data-value')) {
                        this.highlightUpdate(element);
                    }
                }
            });
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true,
            characterData: true
        });
    }

    highlightUpdate(element) {
        element.classList.add('highlight');
        setTimeout(() => {
            element.classList.remove('highlight');
        }, 1000);
    }
}

// Inicializar quando a página carregar
document.addEventListener('DOMContentLoaded', () => {
    new MicroInteractions();
});


// Função para copiar o PIX
function copyPix() {
    const pixCode = '27f3b45c-eb2f-4be8-b337-d10398c9eb47 ';
    
    // Usando a API moderna de clipboard
    navigator.clipboard.writeText(pixCode)
        .then(() => {
            // Sucesso - mostrar feedback
            showCopyFeedback('✅ PIX copiado!', true);
        })
        .catch(err => {
            // Fallback para métodos antigos
            copyFallback(pixCode);
        });
}

// Fallback para navegadores mais antigos
function copyFallback(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.opacity = '0';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
        const successful = document.execCommand('copy');
        if (successful) {
            showCopyFeedback('✅ PIX copiado!', true);
        } else {
            showCopyFeedback('❌ Falha ao copiar', false);
        }
    } catch (err) {
        showCopyFeedback('❌ Erro ao copiar', false);
    }
    
    document.body.removeChild(textArea);
}

// Mostrar feedback visual
function showCopyFeedback(message, isSuccess) {
    // Encontrar o botão atual
    const button = document.querySelector('[onclick="copyPix()"]');
    if (!button) return;
    
    // Salvar conteúdo original
    const originalHtml = button.innerHTML;
    const originalText = button.textContent;
    
    // Atualizar botão temporariamente
    button.innerHTML = isSuccess ? 
        '<i class="fas fa-check"></i> ' + message :
        '<i class="fas fa-times"></i> ' + message;
    
    button.style.background = isSuccess ? 'var(--success)' : 'var(--error)';
    button.disabled = true;
    
    // Restaurar após 2 segundos
    setTimeout(() => {
        button.innerHTML = originalHtml;
        button.style.background = '';
        button.disabled = false;
    }, 2000);
}

// Adicionar evento de clique alternativo (caso o onclick não funcione)
document.addEventListener('DOMContentLoaded', function() {
    const pixButton = document.querySelector('[onclick="copyPix()"]');
    if (pixButton) {
        // Adicionar um event listener como backup
        pixButton.addEventListener('click', function(e) {
            // Prevenir duplicação se o onclick já funcionou
            if (!e.defaultPrevented) {
                copyPix();
            }
        });
    }
});

// Versão alternativa mais simples (se preferir)
function copyPixSimple() {
    const pixText = '27f3b45c-eb2f-4be8-b337-d10398c9eb47 ';
    
    navigator.clipboard.writeText(pixText).then(() => {
        // Feedback visual simples
        const button = document.querySelector('.btn[onclick*="copyPix"]');
        if (button) {
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> Copiado!';
            button.style.background = 'var(--success)';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 1500);
        }
    }).catch(err => {
        console.error('Falha ao copiar: ', err);
        alert('Falha ao copiar. A chave PIX é: 27f3b45c-eb2f-4be8-b337-d10398c9eb47 ');
    });
}

    </script>



</body>

</html>